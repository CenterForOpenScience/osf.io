{% load user_extras %}
{% load node_extras %}

<tr>
    <td>Contributors</td>
    <td>
        <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <td>Email</td>
                <td>Name</td>
                <td>Permissions</td>
                <td>Actions</td>
            </tr>
        </thead>
        <tbody>
        {% for user in node.contributors %}
            <tr>
                <td>
                    <a href="{{ user.id | reverse_user }}">
                        {{ user }}
                    </a>
                </td>
                <td>{{ user.fullname }}</td>
                <td>{% get_permissions user.id node.id %}</td>
                {%  if perms.osf.change_node %}
                    <td>
                        <a href="{% url 'nodes:remove_user' guid=node.id user_id=user.id %}"
                           data-toggle="modal"
                           data-target="#{{ user.id }}Modal"
                           class="btn btn-danger">
                            Remove
                        </a>
                        <div class="modal" id="{{ user.id }}Modal">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                {# from remove_contributor.html#}
                                </div>
                            </div>
                        </div>
                    </td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
        </table>
    </td>
</tr>