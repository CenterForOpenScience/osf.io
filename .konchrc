# -*- coding: utf-8 -*-
import logging

import konch
from faker import Factory

from framework import Q
from framework.auth.model import User
from framework import db
from website.app import init_app
from website.project.model import Node
from website import models
from tasks import test
from tests.base import URLLookup
import requests

konch.logger.setLevel(logging.WARNING)

fake = Factory.create()

app = init_app()
lookup = URLLookup(app)

BANNER = """
                     .+yhhys/`
                   `smmmmmmmmd:
          `--.`    ommmmmmmmmmm.   `.--.
       `odmmmmmh/  smmmhhyhdmmm- :ymmmmmdo.
      -dmmmmmmmmmy .hho+++++sdo smmmmmmmmmm:
      smmmmmmmmmmm: `++++++++: -mmmmmmmmmmmy
      +mmmmmmmmmmmo: :+++++++.:+mmmmmmmmmmmo
       +dmmmmmmmds++. .://:-``++odmmmmmmmmo
        `:osyhys+++/          :+++oyhyso/`
  `/shddds/``.-::-.            `-::-.``/shdddy/`
 -dmmmmmds++++/.                  ./++++sdmmmmmd:
 hmmmmmmo+++++++.                .++++++++dmmmmmd`
 hmmmmmmo+++++++.                .++++++++dmmmmmd`
 -dmmmmmds++++/.                  ./++++sdmmmmmd:
  `/shddhs/``.-::-.            `-::-.``/shdddy/`
        `:osyhys+++/          :+++oyhyso/`
       +dmmmmmmmds++. .://:- `++odmmmmmmmmo
      +mmmmmmmmmmmo: /++++++/`:+mmmmmmmmmmmo
      smmmmmmmmmmm: `++++++++. -mmmmmmmmmmmy
      -dmmmmmmmmmy  `s++++++y/  smmmmmmmmmm:
       `odmmmmmh/   hmmhyyhdmm/  :ymmmmmds.
          `--.`    `mmmmmmmmmmo    `.--.
                    /mmmmmmmmh`
                     `+shhyo:

Welcome to the OSF shell. Happy hacking!"""

konch.config({
    'context': {
        'app': app,
        'db': db,
        'User': User,
        'Node': Node,
        'Q': Q,
        'models': models,
        'run_tests': test,
        'rget': requests.get,
        'rpost': requests.post,
        'rdelete': requests.delete,
        'rput': requests.put,
        'lookup': lookup
    },
    'banner': BANNER,
    'prompt': '[\\#] (osf) >>> '
})
